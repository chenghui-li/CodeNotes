# 程序分析
## 27-1
展示函数execve的用法
```
#include<unistd.h>
#include<stdlib.h>
#include<string.h>
int main(int argc,char *argv[]){
	char *argVec[10];
	char *envVec[]  = {"GREET=salut","BYE=adieu",NULL};

	argVec[0] = strrchr(argv[1],'/');  //返回最后一次出现‘/’的位置
	if(argVec[0] != NULL)
	    argVec[0]++;
	else
	    argVec[0] = argv[1];
	argVec[1] = "hello world";
	argVec[2] = "goodbye";
	argVec[3] = NULL;

	execve(argv[1],argVec,envVec);
	exit(0);
}
```
分析：首先为新程序创建命令行参数和环境列表（都以NULL结尾），然后调用execve来执行argv[1]所指定的程序路径名。
strrchr为在指定字符串中查找指定字符最后一次出现的位置，成功返回该位置，否则返回NULL。
若要向查找第一次出现的位置，则用strchr函数。
## 27-2
显示参数列表和环境列表，供27-1调用
```
#include<unistd.h>
#include<string.h>
#include<stdlib.h>
extern char **environ;
int main(int argc,char *argv[]){
	int j;
	char **ep;
	for(int j = 0;j<argc,j++)
	    printf("argv[%d] = %s\n",j,argv[j]);
	for(ep = environ;*ep != NULL;ep++)
	    printf("environ: %s\n",*ep);
	exit(0);
}
```
分析：只是简单打印自身命令行参数和环境列表。